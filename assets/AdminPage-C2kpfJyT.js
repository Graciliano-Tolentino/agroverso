const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-vendor-CeVJx1TZ.js","assets/vendor-DEgGNhlE.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,R as a,u as t}from"./react-vendor-CeVJx1TZ.js";import{A as r}from"./index-8tFx6Uxn.js";import{_ as o,i,P as n}from"./vendor-DEgGNhlE.js";import l from"./AvisoRedirecionamento-CBtZwTVX.js";import{F as d}from"./FormInput-BZq_3rVR.js";import{B as c}from"./Button-DFrael_q.js";const m=a.lazy((async()=>{const e=await o((()=>import("./react-vendor-CeVJx1TZ.js").then((e=>e.n))),__vite__mapDeps([0,1]));return{default:e.QRCode||e.default||(()=>null)}})),x=e.memo((({value:a,size:t=128,fgColor:r="#000000",bgColor:o="#ffffff",level:i="H",className:n="",fallbackMessage:l="Carregando QR Code...",...d})=>a&&"string"==typeof a?s.jsx(e.Suspense,{fallback:s.jsx("div",{className:"text-gray-500 text-sm italic",children:l}),children:s.jsx(m,{value:a,size:t,fgColor:r,bgColor:o,level:i,className:n,...d})}):s.jsx("div",{className:"text-red-600 text-sm italic",children:"QR Code inválido — valor ausente ou malformado."}))),g=({nome:e,curso:a,data:t,emitidoEm:r,codigoAssinadoJWT:o,orgaoEmissor:n="Agroverso"})=>{const l=e=>e&&e.trim()||"DADO NÃO FORNECIDO",d="https://certificados.agroverso.tec.br/validar?token=".concat(o);return s.jsxs(s.Fragment,{children:[s.jsxs("article",{id:"certificate",role:"document",className:"font-opensans bg-white text-grayIntelligent p-8 sm:p-12 mx-auto my-4 shadow-lg max-w-3xl",children:[s.jsxs("header",{className:"text-center mb-8",children:[s.jsx("img",{src:"/assets/images/logo.png",alt:"Logotipo da Agroverso",className:"mx-auto mb-4 h-16 sm:h-20",loading:"lazy"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-green-700",children:"Certificado"})]}),s.jsxs("section",{className:"mb-6",children:[s.jsxs("p",{className:"text-lg text-center mb-4",children:["Certificamos que ",s.jsx("span",{className:"font-bold",children:l(e)})," concluiu o curso"," ",s.jsx("span",{className:"font-bold",children:l(a)})," em"," ",s.jsx("span",{className:"font-bold",children:l(t)}),"."]}),s.jsx("p",{className:"text-center text-base italic text-grayIntelligent",children:"Parabéns por cultivar conhecimento e sabedoria em nossa plataforma."})]}),s.jsx("section",{className:"text-center text-xs text-gray-500 mb-6",children:s.jsxs("p",{children:["Emitido por ",s.jsx("strong",{children:n})," em ",s.jsx("strong",{children:l(r)})]})}),s.jsxs("aside",{className:"text-center mb-8",children:[s.jsx(x,{value:d}),s.jsx("p",{className:"mt-2 text-sm text-grayIntelligent",children:"Escaneie o QR Code ou acesse:"}),s.jsx("p",{className:"text-xs text-blue-600 underline mt-1 break-all",children:s.jsx("a",{href:d,target:"_blank",rel:"noreferrer",children:d})})]}),s.jsxs("footer",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 text-center",children:[s.jsxs("div",{children:[s.jsx("img",{src:"/assets/images/signature1.png",alt:"Assinatura de Vinícius Almeida",className:"mx-auto mb-2 h-12 sm:h-16",loading:"lazy"}),s.jsx("p",{className:"font-semibold",children:"Vinícius Almeida"}),s.jsx("p",{className:"text-sm text-grayIntelligent",children:"Diretor Executivo, Agroverso"})]}),s.jsxs("div",{children:[s.jsx("img",{src:"/assets/images/signature2.png",alt:"Assinatura de Mariana Silva",className:"mx-auto mb-2 h-12 sm:h-16",loading:"lazy"}),s.jsx("p",{className:"font-semibold",children:"Mariana Silva"}),s.jsx("p",{className:"text-sm text-grayIntelligent",children:"Instrutora Responsável"})]})]})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsx("button",{onClick:()=>{const s=document.getElementById("certificate");s?i().set({margin:.5,filename:"Certificado - ".concat(l(e),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{format:"a4",orientation:"portrait"}}).from(s).save():alert("Erro: Certificado não pode ser exportado. Elemento não encontrado.")},className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded",children:"Exportar PDF"})})]})};function u(){const{isAuthenticated:a,user:o,logout:i}=e.useContext(r),n=t(),[m,x]=e.useState({nome:"",curso:"",data:(new Date).toLocaleDateString("pt-BR"),qrCodeUrl:""}),[u,h]=e.useState(!1),[f,p]=e.useState(""),[j,b]=e.useState(!1);if(e.useEffect((()=>{if(!a){b(!0);const e=setTimeout((()=>n("/login")),2e3);return()=>clearTimeout(e)}}),[a,n]),j)return s.jsx(l,{mensagem:"🔒 Acesso negado. Redirecionando para login..."});const v=e=>{x({...m,[e.target.name]:e.target.value}),p("")};return s.jsx("section",{className:"min-h-screen px-6 py-20 bg-gray-50 font-opensans",children:s.jsxs("div",{className:"max-w-5xl mx-auto bg-white p-8 md:p-12 rounded-2xl shadow-xl",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Sessão ativa: ",s.jsx("span",{className:"text-green-700 font-bold",children:null==o?void 0:o.email})]}),s.jsx("button",{onClick:i,"aria-label":"Encerrar sessão",className:"mt-4 md:mt-0 text-sm text-red-600 hover:text-red-800 font-medium transition",children:"Sair da sessão"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-10",children:[s.jsxs("form",{onSubmit:e=>{e.preventDefault();const{nome:s,curso:a,data:t,qrCodeUrl:r}=m;if(!(s&&a&&t&&r))return p("⚠️ Preencha todos os campos antes de gerar o certificado."),void h(!1);h(!0),p("");const o=document.createElement("div");o.innerText="✅ Certificado gerado com sucesso!",o.className="fixed top-6 right-6 bg-green-600 text-white px-6 py-3 rounded shadow-lg text-sm animate-fadeInOut z-50",document.body.appendChild(o),setTimeout((()=>{document.body.removeChild(o)}),2500)},className:"md:w-1/2 space-y-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2",children:"📄 Gerar Certificado Digital"}),f&&s.jsx("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded text-sm",children:f}),s.jsx(d,{label:"Nome completo",name:"nome",value:m.nome,onChange:v,required:!0}),s.jsx(d,{label:"Nome do curso",name:"curso",value:m.curso,onChange:v,required:!0}),s.jsx(d,{label:"Data de emissão",name:"data",value:m.data,onChange:v,required:!0}),s.jsx(d,{label:"URL do QR Code",name:"qrCodeUrl",value:m.qrCodeUrl,onChange:v,required:!0}),s.jsx(c,{type:"submit",variant:"primary",ariaLabel:"Gerar certificado digital",children:"Gerar Certificado"})]}),s.jsx("div",{className:"md:w-1/2 overflow-x-auto",children:u&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4 mt-2",children:"✅ Certificado gerado abaixo."}),s.jsx(g,{nome:m.nome,curso:m.curso,data:m.data,qrCodeUrl:m.qrCodeUrl})]})})]})]})})}g.propTypes={nome:n.string.isRequired,curso:n.string.isRequired,data:n.string.isRequired,emitidoEm:n.string.isRequired,codigoAssinadoJWT:n.string.isRequired,orgaoEmissor:n.string};export{u as default};
